/*! diaodiao 李彦峰 2015-09-28 */
$(function(){function a(a){console.log("callback invoked!");var b=$(".hot-list");$.each(a,function(a,c){a>3||$('<li class="f-l"><a href="'+c.url.replace(d,f)+'"><img src="'+c.thumb+'" alt="" width="144" height="144"><p>'+c.title+"</p></a></li>").appendTo(b)})}function a(a){console.log("callback invoked!");var b,c,g,h=$(".hot-list");$(".success-remove").remove(),$.each(a,function(a,i){a>3||(b=i.url,g=i.thumb,-1==g.indexOf("http")&&(g="http://a.diaox2.com/cms/sites/default/files/"+g),c=b.match(d),c&&c.length?b=c[0].replace(d,f):(c=b.match(e),c&&c.length&&(b=c[0].replace(e,f))),$('<li class="f-l"><a href="'+b+'"><img src="'+i.thumb+'" alt="" width="144" height="144"><p>'+i.title+"</p></a></li>").appendTo(h))})}function b(){C.toggleClass("disnone"),E.animate({top:-450},function(){E.toggleClass("disnone")})}var c=document,d=/\/view\/app\/\?m=(?:show|zk|scene)&id=(\d+)?(&ch=goodthing)?/i,e=/\/cms\/diaodiao\/articles\/(?:goodthing|firstpage|experience|weekend)\/\d+_(\d+)?\.html/i,f="$1.html",g=c.querySelector(".article-banner-container");if(null!==g){var h,i,j=g.querySelector(".banner-list"),k=j.querySelectorAll("li"),l=k.length,m=1===l,n=0,o=maxZindex=l-1,p=($(j),$(g)),q=p.prev(),r=p.next(),s=p.width();m?(q.remove(),r.remove()):($(k).each(function(a,b){b.style.zIndex=o--}),q.on("click",function(){-1===--n&&(n=l-1),i=k[n],i.style.left=-s+"px",i.style.zIndex=++maxZindex,$(i).animate({left:0})}),r.on("click",function(){++n===l&&(n=0),i=k[n],i.style.left=s+"px",i.style.zIndex=++maxZindex,$(i).animate({left:0})}),h=setInterval(function(){r.trigger("click")},1800),$(".article-banner").hover(function(){clearInterval(h)},function(){h=setInterval(function(){r.trigger("click")},1800)}))}$.ajax({url:"http://c.diaox2.com/view/app/?m=recommend&id="+c.body.className.split("_")[0],type:"GET",cache:!0,dataType:"jsonp",crossDomain:!0,jsonpCallback:"mycb",jsonp:"cb",success:a,error:function(a){console.log("recmmend error!"),console.log(a)}});{var t=c.querySelector(".share-area"),u=t.querySelector(".share-wb"),v=t.querySelector(".share-list"),w=v.querySelector("li.cancle a"),x=c.querySelector(".share-mask"),y=c.querySelector(".share-close"),z=c.querySelector(".share"),A=t.querySelector(".share-wx"),B=c.querySelector(".bottom-share"),C=$(x),D=$(y),E=$(t),F=$(z),G=$(B),H=($(u),$(w));$(A)}$(u).on("click",function(){$(v).animate({left:0}),$(u).addClass("active"),$(A).removeClass("active")}),$(A).on("click",function(){$(v).animate({left:-800}),$(A).addClass("active"),$(u).removeClass("active")}),H.on("click",b),C.on("click",b),D.on("click",b),F.on("click",function(){C.toggleClass("disnone"),E.toggleClass("disnone"),E.animate({top:c.documentElement.scrollTop||c.body.scrollTop+100})}),G.on("click",function(){C.toggleClass("disnone"),E.toggleClass("disnone"),E.animate({top:c.documentElement.scrollTop||c.body.scrollTop+100})});var I,J=$(".method"),K="tt-ii-pp-s",L=J.find("span");L.hover(function(){I=this.parentNode,$.contains(I,I.querySelector("."+K))||$(I).css({position:"relative","z-index":0}).append("<span class='"+K+"' style='position:absolute;top:-72%;left:25px;width:auto;font-size:14px;z-index:-1;'>"+this.innerHTML+"</span>")},function(){I=this.parentNode,$(I).find("."+K).remove()})});